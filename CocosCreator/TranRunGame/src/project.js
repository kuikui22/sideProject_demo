window.__require=function t(o,e,n){function r(c,s){if(!e[c]){if(!o[c]){var u=c.split("/");if(u=u[u.length-1],!o[u]){var a="function"==typeof __require&&__require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+c+"'")}}var p=e[c]={exports:{}};o[c][0].call(p.exports,function(t){return r(o[c][1][t]||t)},p,p.exports,t,o,e,n)}return e[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({CoinMgr:[function(t,o,e){"use strict";cc._RF.push(o,"94381DhDO1ENqHx3JLDv5x3","CoinMgr");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=t("./Common/CommonFunc"),c=t("./Common/GameConst"),s=cc._decorator,u=s.ccclass,a=(s.property,function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o._width=0,o._height=0,o}return n(o,t),o.prototype.start=function(){this.init()},o.prototype.init=function(){this._width=this.node.width*this.node.scale,this._height=this.node.height*this.node.scale},o.prototype.isContact=function(){var t=this.node.x+this._width/2,o=this.node.x-this._width/2,e=this.node.y+this._height/2,n=this.node.y-this._height/2,r=i.default.getHero(),c=i.default.convertWorldToNodePos(r,this.node),s=i.default.getHeroCollisionNodeSize(),u=c.x+s.width/2,a=c.y+s.height/2;return u<=t&&u>=o&&a<=e&&a>=n},o.prototype.onEnable=function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.5,0,1),cc.scaleTo(1.5,1,1))))},o.prototype.onDisable=function(){this.node.stopAllActions()},o.prototype.update=function(t){i.default.getGameStatus()===c.GameConst.GAME_STATUS_PLAY&&this.isContact()&&(this.node.active=!1,i.default.getEventNode().emit(c.GameConst.CHANGE_SCORE,1))},o=r([u],o)}(cc.Component));e.default=a,cc._RF.pop()},{"./Common/CommonFunc":"CommonFunc","./Common/GameConst":"GameConst"}],ColliderMgr:[function(t,o,e){"use strict";cc._RF.push(o,"e86abJ8GZNNmJUFKmYdmYq6","ColliderMgr");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o._collidionNumber=null,o}return n(o,t),o.prototype.onLoad=function(){this.init()},o.prototype.start=function(){},o.prototype.init=function(){},o.prototype.onCollisionEnter=function(t,o){this._collidionNumber+=1,this.node.color=cc.Color.RED},o.prototype.onCollisionStay=function(t,o){},o.prototype.onCollisionExit=function(t,o){this._collidionNumber-=1,this._collidionNumber<=0&&(this.node.color=cc.Color.WHITE,this._collidionNumber=0)},o=r([c],o)}(cc.Component));e.default=s,cc._RF.pop()},{}],CommonFunc:[function(t,o,e){"use strict";cc._RF.push(o,"5d629Ci/GFEcbbZWC4EKP9h","CommonFunc"),Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.getEventNode=function(){return cc.director.getScene().getChildByName("EventNode")},t.setGameMgr=function(t){this.gameMgr=t},t.getGameStatus=function(){return this.gameMgr.getStatus()},t.getHero=function(){return this.gameMgr._hero},t.getHeroCollisionNodeSize=function(){var t=this.getHero(),o=t.scale,e=t.getChildByName("CollisionNode");return{height:e.height*o,width:e.width*o}},t.changeHeroPos=function(t){this.gameMgr._hero.x=t},t.convertWorldToNodePos=function(t,o){var e=t.parent.convertToWorldSpaceAR(cc.v2(t.getPosition())),n=o.parent.convertToNodeSpaceAR(e);return cc.v2(n)},t.gameMgr=null,t}();e.default=n,cc._RF.pop()},{}],EventMgr:[function(t,o,e){"use strict";cc._RF.push(o,"cc6003wCRFPJ4rLj99a7Icf","EventMgr");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return n(o,t),o.prototype.onLoad=function(){cc.log("EventMgr \u521d\u59cb\u5316\uff01"),cc.game.addPersistRootNode(this.node)},o=r([c],o)}(cc.Component));e.default=s,cc._RF.pop()},{}],GameConst:[function(t,o,e){"use strict";cc._RF.push(o,"7612dDEgkhLarbsLVjDeXPg","GameConst"),Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.GAME_STATUS_END=0]="GAME_STATUS_END",t[t.GAME_STATUS_FREE=1]="GAME_STATUS_FREE",t[t.GAME_STATUS_PLAY=2]="GAME_STATUS_PLAY",t.CHANGE_STATUS="CHANGE_STATUS",t.CHANGE_HERO_STATUS="CHANGE_HERO_STATUS",t.GAME_END="GAME_END",t.CHANGE_SCORE="CHANGE_SCORE",t.SLOW_SPEED="SLOW_SPEED"}(e.GameConst||(e.GameConst={})),function(t){t.RUN="run",t.JUMP="jump",t.ROLL="roll"}(e.HeroAct||(e.HeroAct={})),function(t){t[t.DEAD=0]="DEAD",t[t.FREE=1]="FREE",t[t.PLAY=2]="PLAY"}(e.HeroStatus||(e.HeroStatus={})),function(t){t[t.HERO_X=-92]="HERO_X",t[t.HERO_Y=-57]="HERO_Y",t[t.LEFT_DEAD_X=-280]="LEFT_DEAD_X"}(e.ComponentPos||(e.ComponentPos={})),e.GroundsPos=[[1,1,1,1,0,1,0,1,1],[1,0,1,1,1,1,0,1,0],[1,1,0,1,0,1,0,1,1]],e.obstaclePos=[[1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1]],e.CoinPos=[[0,0,0,1,1,0,1,1,0,0,1,0,1,1,1],[0,0,0,0,0,0,0,1,1,1,0,1,0,1,1],[1,1,0,1,0,1,1,0,0,0,1,1,0,0,0]],cc._RF.pop()},{}],GameMgr:[function(t,o,e){"use strict";cc._RF.push(o,"ae524g2wTxNA5RRH9225pVs","GameMgr");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=t("./Common/CommonFunc"),c=t("./Common/GameConst"),s=cc._decorator,u=s.ccclass,a=s.property,p=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.eventNode=null,o.heroPrefab=null,o.GroundNode=null,o.jumpBtn=null,o.rollBtn=null,o.GameEndWindow=null,o.restartBtn=null,o.cutdownNode=null,o.scoreLabel=null,o._hero=null,o._heroScript=null,o._status=c.GameConst.GAME_STATUS_FREE,o._cutdownNum=5,o._score=0,o}var e;return n(o,t),e=o,o.getInstance=function(){return this.instance||(this.instance=new e),this.instance},o.prototype.onLoad=function(){this.addEvent()},o.prototype.start=function(){this.init(),this.initHero(),this.playCutdownAnim()},o.prototype.addEvent=function(){i.default.getEventNode().on(c.GameConst.CHANGE_STATUS,this.changeStatus,this),i.default.getEventNode().on(c.GameConst.CHANGE_SCORE,this.changeScore,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.jumpBtn.on(cc.Node.EventType.TOUCH_START,this.clickJumpBtn,this),this.rollBtn.on(cc.Node.EventType.TOUCH_START,this.clickRollBtn,this),this.rollBtn.on(cc.Node.EventType.TOUCH_END,this.clickRollBtnEnd,this),this.restartBtn.on(cc.Node.EventType.TOUCH_END,this.clickRestartBtn,this)},o.prototype.init=function(){i.default.setGameMgr(this),cc.director.getCollisionManager().enabled=!0,this.GameEndWindow.active=!1},o.prototype.initHero=function(){this._hero=cc.instantiate(this.heroPrefab),this.node.addChild(this._hero),this._hero.scale=.5,this._hero.setPosition(-92,-57),this._heroScript=this._hero.getComponent("Hero")},o.prototype.clickJumpBtn=function(){this._heroScript.jump()},o.prototype.clickRollBtn=function(){this._heroScript.roll()},o.prototype.clickRollBtnEnd=function(){this._heroScript.run()},o.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.up:this.clickJumpBtn();break;case cc.macro.KEY.down:this.clickRollBtn()}},o.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.down:this.clickRollBtnEnd()}},o.prototype.clickRestartBtn=function(){this.changeStatus(c.GameConst.GAME_STATUS_FREE),this.GameEndWindow.active=!1},o.prototype.playCutdownAnim=function(){var t=this,o=this.cutdownNode.getChildByName("label");o.scale=1,o.stopAllActions(),o.getComponent(cc.Label).string=this._cutdownNum.toString();var e=cc.scaleTo(.5,1.3),n=0;this.cutdownNode.active=!0;for(var r=this._cutdownNum-1;r>=-1;r--)o.runAction(cc.sequence(cc.delayTime(n),e.easing(cc.easeBackOut()),cc.scaleTo(.5,1),cc.callFunc(function(o,e){if(e<0)return t.cutdownNode.active=!1,void t.changeStatus(c.GameConst.GAME_STATUS_PLAY);o.getComponent(cc.Label).string=e},o,r))),n+=1},o.prototype.changeStatus=function(t){switch(cc.log("changeStatus",t),this._status=t,this._status){case c.GameConst.GAME_STATUS_END:cc.log("GAME END !!!"),this.GameEndWindow.active=!0;break;case c.GameConst.GAME_STATUS_FREE:this.readyGame();break;case c.GameConst.GAME_STATUS_PLAY:this.startGame()}},o.prototype.getStatus=function(){return this._status},o.prototype.readyGame=function(){cc.log("readyGame...."),this.playCutdownAnim(),i.default.getEventNode().emit(c.GameConst.CHANGE_HERO_STATUS,c.HeroStatus.FREE),this.GroundNode.getComponent("GroundMgr").resetGround()},o.prototype.startGame=function(){i.default.getEventNode().emit(c.GameConst.CHANGE_HERO_STATUS,c.HeroStatus.PLAY)},o.prototype.changeScore=function(t){this._score+=t,this.scoreLabel.string=this._score.toString()},o.instance=null,r([a(cc.Node)],o.prototype,"eventNode",void 0),r([a(cc.Prefab)],o.prototype,"heroPrefab",void 0),r([a(cc.Node)],o.prototype,"GroundNode",void 0),r([a(cc.Node)],o.prototype,"jumpBtn",void 0),r([a(cc.Node)],o.prototype,"rollBtn",void 0),r([a(cc.Node)],o.prototype,"GameEndWindow",void 0),r([a(cc.Node)],o.prototype,"restartBtn",void 0),r([a(cc.Node)],o.prototype,"cutdownNode",void 0),r([a(cc.Label)],o.prototype,"scoreLabel",void 0),o=e=r([u],o)}(cc.Component);e.default=p,cc._RF.pop()},{"./Common/CommonFunc":"CommonFunc","./Common/GameConst":"GameConst"}],GroundMgr2:[function(t,o,e){"use strict";cc._RF.push(o,"d91b1Y29PlNmZlgP0mZLCu1","GroundMgr2");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,u=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.groundPrefab=null,o._poolCount=15,o._showGrounds=15,o._posY=-102,o._startPosX=276,o._endPosX=-285,o._speed=200,o._dis=0,o._groundPools=new cc.NodePool,o}return n(o,t),o.prototype.onLoad=function(){this._dis=this.calcDistance(this._startPosX,this._posY,this._endPosX,this._posY),this.initGroundPools()},o.prototype.start=function(){this.initGrounds(),this.moveGrounds()},o.prototype.initGrounds=function(){for(var t=0;t<this._showGrounds;t++){var o=this.popGround();o.y=this._posY,o.x=this._endPosX+o.width*(t+1),o.parent=this.node}},o.prototype.moveGrounds=function(){for(var t=this.node.childrenCount,o=this,e=function(t){var e=n.node.children[t],r=n.calcDistance(e.x,e.y,n._endPosX,n._posY)/n._speed;e.runAction(cc.sequence(cc.moveTo(r,cc.v2(n._endPosX,n._posY)),cc.callFunc(function(){o.putGround(e[t]),o.creatGround()}.bind(o))))},n=this,r=0;r<t;r++)e(r)},o.prototype.creatGround=function(t){void 0===t&&(t=0);var o=this,e=this.popGround(),n=this._dis/this._speed;o.node.addChild(e),e.setPosition(cc.v2(this._startPosX,this._posY)),e.runAction(cc.sequence(cc.delayTime(t),cc.moveTo(n,cc.v2(this._endPosX,this._posY)),cc.callFunc(function(){o.putGround(e),o.creatGround()})))},o.prototype.initGroundPools=function(){for(var t=0;t<this._poolCount;t++){var o=cc.instantiate(this.groundPrefab);this._groundPools.put(o)}},o.prototype.popGround=function(){return 0==this._groundPools.size()?cc.instantiate(this.groundPrefab):this._groundPools.get()},o.prototype.putGround=function(t){t&&(t.stopAllActions(),this._groundPools.put(t))},o.prototype.calcDistance=function(t,o,e,n){var r=Math.pow(e-t,2),i=Math.pow(n-o,2);return Math.sqrt(r+i)},r([s(cc.Prefab)],o.prototype,"groundPrefab",void 0),o=r([c],o)}(cc.Component);e.default=u,cc._RF.pop()},{}],GroundMgr:[function(t,o,e){"use strict";cc._RF.push(o,"f6fcfP9Sc9E65TOzVoMTAjL","GroundMgr");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=t("./Common/GameConst"),c=t("./Common/CommonFunc"),s=cc._decorator,u=s.ccclass,a=s.property,p=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.groundPrefab=null,o.obstaclePrefab=null,o.coinPrefab=null,o.groundsNode=[],o._poolCount=27,o._showGrounds=9,o._posY=-102,o._startPosX=240,o._endPosX=-240,o._speed=-200,o._gNodeLimit=-520,o._gNodeResetX=1080,o._groundScale=.5,o._groundPools=new cc.NodePool,o._gameMgr=null,o._slowSpeed=1,o._obstacleY=51,o._showObstacles=12,o._coinY=-1,o._showCoins=15,o}var e;return n(o,t),e=o,o.prototype.onLoad=function(){this.initGroundPools(),e.instance()},o.prototype.start=function(){this.addEvent(),this.initGrounds()},o.instance=function(){return this._groundMgr||(this._groundMgr=new e),this._groundMgr},o.prototype.addEvent=function(){c.default.getEventNode().on(i.GameConst.SLOW_SPEED,this.changeSlowSpeed,this)},o.prototype.initGrounds=function(){for(var t=0,o=this.groundsNode.length;t<o;t++)this.makeGround(this.groundsNode[t],t),this.makeObstacle(this.groundsNode[t],t),this.makeCoin(this.groundsNode[t],t)},o.prototype.makeGround=function(t,o){for(var e=i.GroundsPos[o],n=0,r=e.length;n<r;n++)if(1===e[n]){var c=this.popGround(),s=c.width*this._groundScale;c.y=this._posY,c.x=this._endPosX+s*n,c.parent=t}},o.prototype.makeObstacle=function(t,o){for(var e=i.obstaclePos[o],n=0,r=e.length;n<r;n++)if(1===e[n]){var c=cc.instantiate(this.obstaclePrefab),s=c.width*c.scale;c.y=this._obstacleY,c.x=this._endPosX+s*n,c.parent=t}},o.prototype.makeCoin=function(t,o){for(var e=i.CoinPos[o],n=0,r=e.length;n<r;n++)if(1===e[n]){var c=cc.instantiate(this.coinPrefab),s=c.width*c.scale;c.y=this._coinY,c.x=this._endPosX+s*n,c.name="Coin",c.parent=t}},o.prototype.resetCoin=function(t,o){for(var e=i.CoinPos[o],n=0,r=0,c=t.childrenCount;r<c;r++)t.children[r]&&"Coin"==t.children[r].name&&(t.children[r].active=1===e[n],n+=1)},o.prototype.fullGround=function(t){for(var o=0;o<this._showCoins;o++){var e=cc.instantiate(this.coinPrefab);e.y=this._coinY,e.x=this._endPosX+e.width*e.scale*o+3,e.parent=t}},o.prototype.moveGround=function(){},o.prototype.initGroundPools=function(){for(var t=0;t<this._poolCount;t++){var o=cc.instantiate(this.groundPrefab);this._groundPools.put(o)}},o.prototype.popGround=function(){return 0==this._groundPools.size()?cc.instantiate(this.groundPrefab):this._groundPools.get()},o.prototype.putGround=function(t){t&&(t.stopAllActions(),this._groundPools.put(t))},o.prototype.resetGround=function(){cc.log("resetGround");for(var t=0,o=this.groundsNode.length;t<o;t++)this.groundsNode[t].x=this._gNodeLimit+this.groundsNode[t].width*t},o.prototype.changeSlowSpeed=function(t){this._slowSpeed=t/100},o.prototype.update=function(t){if(c.default.getGameStatus()!==i.GameConst.GAME_STATUS_END&&c.default.getGameStatus()!==i.GameConst.GAME_STATUS_FREE&&c.default.getGameStatus()===i.GameConst.GAME_STATUS_PLAY)for(var o=0,e=this.groundsNode.length;o<e;o++){var n=this.groundsNode[o].x;if(n<=this._gNodeLimit){var r=o-1<0?e-1:o-1;n=this.groundsNode[r].x+this.groundsNode[o].width,this.resetCoin(this.groundsNode[o],o)}n+=this._speed*this._slowSpeed*t,this.groundsNode[o].x=n}},o._groundMgr=null,r([a(cc.Prefab)],o.prototype,"groundPrefab",void 0),r([a(cc.Prefab)],o.prototype,"obstaclePrefab",void 0),r([a(cc.Prefab)],o.prototype,"coinPrefab",void 0),r([a(cc.Node)],o.prototype,"groundsNode",void 0),o=e=r([u],o)}(cc.Component);e.default=p,cc._RF.pop()},{"./Common/CommonFunc":"CommonFunc","./Common/GameConst":"GameConst"}],Hero:[function(t,o,e){"use strict";cc._RF.push(o,"8ef26RUXulL4IgXTGFbnljK","Hero");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=t("./Common/GameConst"),c=t("./Common/CommonFunc"),s=cc._decorator,u=s.ccclass,a=s.property,p=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.CollisionNode=null,o._animation=null,o._animState=null,o._posY=-57,o._status=i.HeroStatus.FREE,o._collidionNumber=0,o._width=0,o._height=0,o}return n(o,t),o.prototype.onLoad=function(){this._animation=this.node.getComponent(cc.Animation),this.addEvent(),this._width=this.node.width*this.node.scale,this._height=this.node.height*this.node.scale},o.prototype.start=function(){this.run()},o.prototype.addEvent=function(){c.default.getEventNode().on(i.GameConst.CHANGE_HERO_STATUS,this.changeStatus,this)},o.prototype.run=function(){this._status===i.HeroStatus.PLAY&&(this.CollisionNode.height=this._height,this._animState=this._animation.play(i.HeroAct.RUN),this.node.y=i.ComponentPos.HERO_Y,this.node.x!=i.ComponentPos.HERO_X&&(this.node.stopAllActions(),this.node.runAction(cc.moveTo(1,cc.v2(i.ComponentPos.HERO_X,i.ComponentPos.HERO_Y)))))},o.prototype.jump=function(){if(this._status===i.HeroStatus.PLAY&&(this._animState.name!=i.HeroAct.JUMP||!this._animState.isPlaying)){this.CollisionNode.height=this._height;var t=this;this.node.y=i.ComponentPos.HERO_Y,this._animState=this._animation.play(i.HeroAct.JUMP),this.node.runAction(cc.sequence(cc.moveTo(.3,cc.v2(i.ComponentPos.HERO_X,i.ComponentPos.HERO_Y+60)),cc.moveTo(.2,cc.v2(i.ComponentPos.HERO_X,i.ComponentPos.HERO_Y-100)),cc.callFunc(function(){t.node.y<t._posY&&t.changeStatus(i.HeroStatus.DEAD)})))}},o.prototype.roll=function(){this._status===i.HeroStatus.PLAY&&(this._animState.name==i.HeroAct.ROLL||this._animState.name!==i.HeroAct.RUN&&this._animState.isPlaying||(this.CollisionNode.height-=40,this._animState=this._animation.play(i.HeroAct.ROLL),this.node.y=i.ComponentPos.HERO_Y-8))},o.prototype.onCollisionEnter=function(t,o){this._collidionNumber+=1,this._animState&&this._animState.name==i.HeroAct.JUMP&&(this.node.stopAllActions(),this.node.y=i.ComponentPos.HERO_Y,this.run())},o.prototype.onCollisionStay=function(t,o){},o.prototype.onCollisionExit=function(t,o){this._collidionNumber-=1,this._collidionNumber<=0&&(this._collidionNumber=0,this.node.y<=i.ComponentPos.HERO_Y&&this.changeStatus(i.HeroStatus.DEAD))},o.prototype.changeStatus=function(t){switch(this._status=t,this._status){case i.HeroStatus.DEAD:this.dead();break;case i.HeroStatus.FREE:this.free();break;case i.HeroStatus.PLAY:this.run()}},o.prototype.getStatus=function(){return this._status},o.prototype.dead=function(){this.node.stopAllActions(),this._animation.stop(),this.node.runAction(cc.sequence(cc.moveTo(.1,cc.v2(i.ComponentPos.HERO_X,i.ComponentPos.HERO_Y-100)),cc.callFunc(function(){c.default.getEventNode().emit(i.GameConst.CHANGE_STATUS,i.GameConst.GAME_STATUS_END)})))},o.prototype.free=function(){this.node.stopAllActions(),this.node.y=i.ComponentPos.HERO_Y},o.prototype.play=function(){},o.prototype.update=function(t){this._status===i.HeroStatus.PLAY&&this.node.x<=i.ComponentPos.LEFT_DEAD_X&&this.changeStatus(i.HeroStatus.DEAD)},r([a(cc.Node)],o.prototype,"CollisionNode",void 0),o=r([u],o)}(cc.Component);e.default=p,cc._RF.pop()},{"./Common/CommonFunc":"CommonFunc","./Common/GameConst":"GameConst"}],ObstacleMgr:[function(t,o,e){"use strict";cc._RF.push(o,"45d1ccv1sxMD4+Pc4HF0bRX","ObstacleMgr");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=t("./Common/GameConst"),c=t("./Common/CommonFunc"),s=cc._decorator,u=s.ccclass,a=(s.property,function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o._width=0,o._height=0,o}return n(o,t),o.prototype.start=function(){this.init()},o.prototype.init=function(){this._width=this.node.width*this.node.scale,this._height=this.node.height*this.node.scale},o.prototype.isContact=function(){var t=this.node.x+this._width/2,o=this.node.x-this._width/2,e=this.node.y+this._height/2,n=this.node.y-this._height/2,r=c.default.getHero(),i=c.default.convertWorldToNodePos(r,this.node),s=c.default.getHeroCollisionNodeSize(),u=i.x+s.width/2,a=i.y+s.height/2;return u<=t&&u>=o&&a<=e&&a>=n},o.prototype.update=function(t){if(c.default.getGameStatus()===i.GameConst.GAME_STATUS_PLAY)if(this.isContact()){this.node.color=cc.Color.RED;var o=c.default.getHero(),e=c.default.convertWorldToNodePos(this.node,o);c.default.changeHeroPos(e.x-this._width/2-.5*c.default.getHero().width/2),c.default.getEventNode().emit(i.GameConst.SLOW_SPEED,10)}else this.node.color=cc.Color.WHITE,c.default.getEventNode().emit(i.GameConst.SLOW_SPEED,100)},o=r([u],o)}(cc.Component));e.default=a,cc._RF.pop()},{"./Common/CommonFunc":"CommonFunc","./Common/GameConst":"GameConst"}],ScrollMgr:[function(t,o,e){"use strict";cc._RF.push(o,"714f9N2VO5Ir7sDvRDxeEXz","ScrollMgr");var n=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=t("./Common/GameConst"),c=t("./Common/CommonFunc"),s=cc._decorator,u=s.ccclass,a=s.property,p=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.speed=0,o.resetX=0,o.limitX=0,o.moveChildren=[],o._childrenCount=0,o}return n(o,t),o.prototype.onLoad=function(){this._childrenCount=this.moveChildren.length},o.prototype.update=function(t){if(c.default.getGameStatus()===i.GameConst.GAME_STATUS_PLAY)for(var o=0,e=this.moveChildren.length;o<e;o++){var n=this.moveChildren[o].x;n<=this.limitX&&(n=this.resetX),n+=this.speed*t,this.moveChildren[o].x=n}},r([a],o.prototype,"speed",void 0),r([a],o.prototype,"resetX",void 0),r([a],o.prototype,"limitX",void 0),r([a([cc.Node])],o.prototype,"moveChildren",void 0),o=r([u],o)}(cc.Component);e.default=p,cc._RF.pop()},{"./Common/CommonFunc":"CommonFunc","./Common/GameConst":"GameConst"}],"use_v2.1.x_cc.Action":[function(t,o,e){"use strict";cc._RF.push(o,"576e4D0GutB1qdLH6nhqjQw","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["use_v2.1.x_cc.Action","CoinMgr","ColliderMgr","CommonFunc","GameConst","EventMgr","GameMgr","GroundMgr","GroundMgr2","Hero","ObstacleMgr","ScrollMgr"]);